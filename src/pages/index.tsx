// React
import { useState, type FormEvent } from 'react';

// Next
import Head from 'next/head';

// axios
import axios from 'axios';

// MUI
import Container from '@mui/material/Container';
import Typography from '@mui/material/Typography';
import TextField from '@mui/material/TextField';
import Box from '@mui/material/Box';
import Button from '@mui/material/Button';

export default function Home() {
  const [searchText, setSearchText] = useState('');

  const handleSearchSubmit = async (e: FormEvent) => {
    e.preventDefault();

    try {
      const { data } = await axios.get(`/api/movies/search?q=${searchText}`);
      console.log(data);
    } catch (err) {
      console.log(err);
    }
  };

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <Container>
          <Typography variant="h1" align="center" sx={{ fontSize: '3rem', marginBottom: '1.5rem' }}>
            Search Movies
          </Typography>
          <Box component="form" sx={{ maxWidth: 500, margin: 'auto' }} onSubmit={handleSearchSubmit}>
            <TextField
              required
              fullWidth
              value={searchText}
              onChange={(e) => setSearchText(e.target.value)}
              label="Search"
            />
            <Box sx={{ textAlign: 'right', marginTop: '1rem' }}>
              <Button variant="contained" type="submit">
                Search
              </Button>
            </Box>
          </Box>
        </Container>
      </main>
    </>
  );
}
